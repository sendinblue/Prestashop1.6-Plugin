/**
* 2007-2020 PrestaShop
*
* NOTICE OF LICENSE
*
* This source file is subject to the Academic Free License (AFL 3.0)
* that is bundled with this package in the file LICENSE.txt.
* It is also available through the world-wide-web at this URL:
* http://opensource.org/licenses/afl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade PrestaShop to newer
* versions in the future. If you wish to customize PrestaShop for your
* needs please refer to http://www.prestashop.com for more information.
*
* @author    PrestaShop SA <contact@prestashop.com>
* @copyright 2007-2020 PrestaShop SA
* @license   http://opensource.org/licenses/afl-3.0.php Academic Free License (AFL 3.0)
* International Registered Trademark & Property of PrestaShop SA
*/

function isNormalInteger(e){return/^\+?(0|[0-9]\d*)$/.test(e)}function RegexEmail(e){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(e)}function validate(e,t){return""==document.notify_sms_mail_form.sendin_notify_email.value||0==RegexEmail(document.notify_sms_mail_form.sendin_notify_email.value)?(alert(e),document.notify_sms_mail_form.sendin_notify_email.focus(),!1):!(document.notify_sms_mail_form.sendin_notify_value.value<=0||0==isNormalInteger(document.notify_sms_mail_form.sendin_notify_value.value))||(alert(t),document.notify_sms_mail_form.sendin_notify_value.focus(),!1)}function isInteger(e){return!!/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?$/.test(e)}$(document).ready(function(){var s=jQuery("#customtoken").val(),n=jQuery("#id_shop_group").val(),i=jQuery("#id_shop").val();jQuery("#iso_code").val();if(!$("#apikeybox").is(":hidden")){$("#sender_order").keyup(function(){var e=$(this).val();isInteger(e)||e.length,$("#sender_order").attr("maxlength","11"),$("#sender_order_text").text(11-e.length)}),$(".manage_subscribe_block input[name=subscribe_confirm_type]").click(function(){$(".manage_subscribe_block .inner_manage_box").slideUp(),$(this).parents(".manage_subscribe_block").find(".inner_manage_box").slideDown()}),$(".openCollapse").click(function(){$(this).is(":checked")?$(this).parent(".form-group").find(".collapse").slideDown():$(this).parent(".form-group").find(".collapse").slideUp()}),$("#template_doubleoptin").bind("change",function(){if(-1===$(this).find("option:selected").text().toLowerCase().indexOf("double optin")){alert("You must select a template with the tag [DOUBLEOPTIN]");var e=$("#template_doubleoptin option").filter(function(){return-1!==$(this).text().toLowerCase().indexOf("double optin")});e.attr("selected",!0),$(this).val(e.val())}}),window.onload=function(){var e=$("#newsletter").val();$("#newsletter").append('<input type="hidden" id="sendinflag" value="'+e+'" name="sendinflag">')},$("#sender_order").keyup(function(e){var t=$(this).val();t=t.replace(/[^a-zA-Z 0-9]+/g,""),$("#sender_order").val(t)}),$("#sender_shipment").keyup(function(e){var t=$(this).val();t=t.replace(/[^a-zA-Z 0-9]+/g,""),$("#sender_shipment").val(t)}),$("#sender_campaign").keyup(function(e){var t=$(this).val();t=t.replace(/[^a-zA-Z 0-9]+/g,""),$("#sender_campaign").val(t)});var e=$("#sender_order").val();if(e&&(isInteger(e)||e.length,$("#sender_order").attr("maxlength","11"),$("#sender_order_text").text(11-e.length)),$("#sender_order").keydown(function(e){32==e.keyCode&&e.preventDefault()}),$("#sender_order_message").keyup(function(){var e=this.value.length,t=Math.ceil(e/160),s=160*t-(e%(160*t)||160*t);0==s&&(s=160),$("#sender_order_message_text").text(s),$("#sender_order_message_text_count").text(t)}),""!=$("#sender_order_message").val()){var t=$("#sender_order_message").val().length,a=160*(u=Math.ceil(t/160))-(t%(160*u)||160*u);$("#sender_order_message_text").text(a),$("#sender_order_message_text_count").text(u)}$("#sender_shipment").keyup(function(){var e=$(this).val();isInteger(e)||e.length,$("#sender_shipment").attr("maxlength","11"),$("#sender_shipment_text").text(11-e.length)});var r=$("#sender_shipment"),o=r.val();if(o&&(isInteger(o)||o.length,r.attr("maxlength","11"),$("#sender_shipment_text").text(11-o.length)),r.keydown(function(e){32==e.keyCode&&e.preventDefault()}),$("#sender_shipment_message").keyup(function(){var e=this.value.length,t=Math.ceil(e/160),s=160*t-(e%(160*t)||160*t);0==s&&(s=160),$("#sender_shipment_message_text").text(s),$("#sender_shipment_message_text_count").text(t)}),""!=$("#sender_shipment_message").val()){t=$("#sender_shipment_message").val().length,a=160*(u=Math.ceil(t/160))-(t%(160*u)||160*u);$("#sender_shipment_message_text").text(a),$("#sender_shipment_message_text_count").text(u)}$("#sender_campaign").keyup(function(){var e=$(this).val();isInteger(e)||e.length,$("#sender_campaign").attr("maxlength","11"),$("#sender_campaign_text").text(11-e.length)});var d=$("#sender_campaign").val();if(d&&(isInteger(d)||d.length,$("#sender_campaign").attr("maxlength","11"),$("#sender_campaign_text").text(11-d.length)),$("#sender_campaign").keydown(function(e){32==e.keyCode&&e.preventDefault()}),$("#sender_campaign_message").keyup(function(){var e=this.value.length,t=Math.ceil(e/160),s=160*t-(e%(160*t)||160*t);0==s&&(s=160),$("#sender_campaign_message_text").text(s),$("#sender_campaign_message_text_count").text(t)}),""!=$("#sender_campaign_message").val()){var u;t=$("#sender_campaign_message").val().length,a=160*(u=Math.ceil(t/160))-(t%(160*u)||160*u);$("#sender_campaign_message_text").text(a),$("#sender_campaign_message_text_count").text(u)}$(".sms_order_setting").click(function(){var t=jQuery(this).val();$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxOrderSetting.php",data:"orderSetting="+t+"&token="+s+"&type=Order&id_shop_group="+n+"&id_shop="+i,beforeSend:function(){$("#ajax-busy").show()},success:function(e){$("#ajax-busy").hide(),1==t?jQuery(".hideOrder").show():jQuery(".hideOrder").hide()}})}),$(".sms_shiping_setting").click(function(){var t=jQuery(this).val();$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxOrderSetting.php",data:"shipingSetting="+t+"&token="+s+"&type=shiping&id_shop_group="+n+"&id_shop="+i,beforeSend:function(){$("#ajax-busy").show()},success:function(e){$("#ajax-busy").hide(),1==t?jQuery(".hideShiping").show():jQuery(".hideShiping").hide()}})}),$(".sms_campaign_setting").click(function(){var t=jQuery(this).val();$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxOrderSetting.php",data:"campaignSetting="+t+"&token="+s+"&type=campaign&id_shop_group="+n+"&id_shop="+i,beforeSend:function(){$("#ajax-busy").show()},success:function(e){$("#ajax-busy").hide(),1==t?jQuery(".hideCampaign").show():jQuery(".hideCampaign").hide()}})}),0==$("input:radio[name=sms_order_setting]:checked").val()?$(".hideOrder").hide():$(".hideOrder").show(),$(".Sendin_Sms_Choice").click(function(){1==jQuery(this).val()?(jQuery(".multiplechoice").hide(),jQuery(".singlechoice").show()):(jQuery(".multiplechoice").show(),jQuery(".singlechoice").hide())}),$("#sib_datetimepicker").datepicker({dateFormat:"yy-mm-dd"}),$(".sms_shiping_setting").click(function(){1==jQuery(this).val()?jQuery(".hideShiping").show():jQuery(".hideShiping").hide()}),jQuery("input:radio[name=Sendin_Sms_Choice]").click(function(){var e=jQuery(this).val();0==e?(jQuery(".multiplechoice").show(),jQuery(".singlechoice").hide(),jQuery(".sib_datepicker").hide()):2==e?(jQuery(".multiplechoice").show(),jQuery(".singlechoice").hide(),jQuery(".sib_datepicker").show()):(jQuery(".singlechoice").show(),jQuery(".multiplechoice").hide(),jQuery(".sib_datepicker").hide())}),$(".sms_shiping_setting").click(function(){1==jQuery(this).val()?jQuery(".hideShiping").show():jQuery(".hideShiping").hide()}),jQuery("#r1_Sendin_Sms_Choice").attr("checked",!0),0==$("input:radio[name=sms_credit]:checked").val()?jQuery(".hideCredit").hide():jQuery(".hideCredit").show(),$(".sms_credit").click(function(){var t=jQuery(this).val();$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxOrderSetting.php",data:"sms_credit="+t+"&token="+s+"&type=sms_credit&id_shop_group="+n+"&id_shop="+i,beforeSend:function(){$("#ajax-busy").show()},success:function(e){$("#ajax-busy").hide(),1==t?jQuery(".hideCredit").show():jQuery(".hideCredit").hide()}})}),0==$("input:radio[name=sms_shiping_setting]:checked").val()?$(".hideShiping").hide():$(".hideShiping").show(),$(".sms_campaign_setting").click(function(){1==jQuery(this).val()?jQuery(".hideCampaign").show():jQuery(".hideCampaign").hide()}),0==$("input:radio[name=sms_campaign_setting]:checked").val()?$(".hideCampaign").hide():$(".hideCampaign").show(),$("#selectSmsList").multiselect({header:!1,checkall:!1}),$("#tabs li").click(function(){$("#tabs li").removeClass("active"),$(this).addClass("active"),$(".tab_content").hide();var e=$(this).find("a").attr("href");return $(e).fadeIn(),!1})}$("#showUserlist").click(function(){$("#userDetails").is(":hidden")?$(".midleft tr").length<=0?l(1,s)&&($("#Spantextless").show(),$("#Spantextmore").hide()):($("#Spantextless").show(),$("#Spantextmore").hide()):($("#Spantextmore").show(),$("#Spantextless").hide());$("#userDetails").slideToggle()}),$("#select").multiselect({header:!1,checkall:!1}),$(".keyyes").click(function(){1==jQuery(this).val()?(jQuery("#apikeybox").show(),jQuery(".hidetableblock").show(),jQuery(".unsubscription").show(),jQuery(".listData").show()):(jQuery("#apikeybox").hide(),jQuery(".hidetableblock").hide(),jQuery(".unsubscription").hide(),jQuery(".listData").hide())}),$(".script").click(function(){var e=jQuery(this).val();$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajax.php",data:{script:e,token:s,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(e){$("#ajax-busy").hide()}})}),$(".clssubmitautomation").click(function(){var e=$("input:radio[name=automation_radio]:checked").val(),t=$("#automsg").val();if(0==e&&!1===confirm(t))return;$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxAutomation.php",data:{automation_radio:e,token:s,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(e){$("#ajax-busy").hide()}})}),$(".clssubmitabandoned").click(function(){var e=$("input:radio[name=abandoned_radio]:checked").val(),t=$("#abanmsg").val();if(0==e&&!1===confirm(t))return;$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxAbandoned.php",data:{abandoned_radio:e,token:s,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(e){$("#ajax-busy").hide()}})}),$(".smtptestclick").click(function(){var e=jQuery(this).val(),t=jQuery("#customtoken").val();0==e&&$("#smtptest").hide(),1==e&&$("#smtptest").show(),$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxsmtpconfig.php",data:{smtptest:e,token:t,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(e){$("#ajax-busy").hide()}})}),0==$("input:radio[name=managesubscribe]:checked").val()?$(".managesubscribeBlock").hide():$(".managesubscribeBlock").show(),$(".managesubscribe").click(function(){var e=jQuery(this).val(),t=jQuery("#customtoken").val(),s=jQuery("#defaultnlmsg").val();0==e&&$(".managesubscribeBlock").hide(),1==e&&$(".managesubscribeBlock").show(),$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxsubscribeconfig.php",data:{managesubscribe:e,token:t,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(e){"error"==e&&alert(s),$("#ajax-busy").hide()}})});s=jQuery("#customtoken").val();function l(e,t){$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxemailresult.php",data:{page:e,token:t,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(a){return $("#ajax-busy").hide(),$(".midleft").html(a),$(".midleft").ajaxComplete(function(e,t,s){$(".midleft").html(a)}),!0}})}$('<div id="ajax-busy"/> loading..').css({opacity:.5,position:"fixed",top:0,left:0,width:"100%",height:$(window).height()+"px",background:"white url("+base_url+"modules/sendinblue/views/img/loader.gif) no-repeat center"}).hide().appendTo("body"),$(".ajax_contacts_href").live("click",function(e){var t=$(this).attr("email"),s=$(this).attr("status"),a=jQuery("#customtoken").val();$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxcall.php",data:{email_value:t,newsletter_value:s,token:a,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(e){$("#ajax-busy").hide()}}),l($("#page_no").val(),a)}),$(".ajax_sms_href").live("click",function(e){var t=$(this).attr("email"),s=jQuery("#customtoken").val(),a=$(this).parent("td").find("#sms_status_val").val();$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxSmsStatus.php",data:{email:t,sms_blacklist_status:a,token:s,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(e){$("#ajax-busy").hide()}}),l($("#page_no").val(),s)}),$("#oem_list").change(function(){var s="",a=$("#oem_list option:selected").length-1;$("#oem_list option:selected").each(function(e,t){s+=$(this).text(),e<a&&(s+=",")}),$("#em_text_val").val(s)}).change(),$(".ordertracking").click(function(){var e=jQuery(this).val();jQuery("#customtoken").val();0==e&&$("#ordertrack").hide(),1==e&&$("#ordertrack").show()}),$("#importOrderTrack").click(function(){var t=jQuery("#importmsg").val(),e=jQuery("#customtoken").val();$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxOrderTracking.php",data:{token:e,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(e){$("#ajax-busy").hide(),$("#ordertrack").hide(),alert(t)}})}),$(".pagination li.active").livequery("click",function(){var e=$(this).attr("p");$("#page_no").val(e),l(e,s)}),$(".toolTip").live("mouseover mouseout",function(e){var t=$(this).attr("title"),s=$(this).offset();if("mouseover"==e.type){$("body").append('<div id="tipkk" style="top:'+s.top+"px; left:"+s.left+'px; ">'+t+"</div>");var a=$("#tipkk").height()+25;$("#tipkk").css("top",s.top-a+"px")}else"mouseout"==e.type&&$("#tipkk").remove()})}),$(".testOrdersmssend").live("click",function(){var t=$(this).attr("successmsg"),s=$(this).attr("failmsg"),e=$("#customtoken").val(),a=$("#langvalue").val(),n=$("#sender_order").val(),i=$("#sender_order_message").val(),r=$("#sender_order_number").val(),o=$("#id_shop_group").val(),d=$("#id_shop").val(),u=$("#iso_code").val();return $.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxtestsms.php",data:{sender:n,message:i,number:r,langvalue:a,token:e,id_shop_group:o,id_shop:d,iso_code:u},beforeSend:function(){$("#ajax-busy").show()},success:function(e){$("#ajax-busy").hide(),1==$.parseJSON(e).result?alert(t):alert(s)}}),!1}),$(".testSmsShipped").live("click",function(){var t=$(this).attr("successmsg"),s=$(this).attr("failmsg"),e=$("#customtoken").val(),a=$("#langvalue").val(),n=$("#sender_shipment").val(),i=$("#sender_shipment_message").val(),r=$("#sender_shipment_number").val(),o=$("#id_shop_group").val(),d=$("#id_shop").val(),u=$("#iso_code").val();return $.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxTestSmsShipped.php",data:{sender:n,message:i,number:r,langvalue:a,token:e,id_shop_group:o,id_shop:d,iso_code:u},beforeSend:function(){$("#ajax-busy").show()},success:function(e){$("#ajax-busy").hide(),1==$.parseJSON(e).result?alert(t):alert(s)}}),!1}),$(".testSmsCampaignsend").live("click",function(){var t=$(this).attr("successmsg"),s=$(this).attr("failmsg"),e=$(this).attr("sendererr"),a=$(this).attr("mobileerr"),n=$(this).attr("messageerr"),i=$("#customtoken").val(),r=$("#langvalue").val(),o=$("#sender_campaign").val(),d=$("#sender_campaign_message").val(),u=$("#sender_campaign_number_test").val(),l=$("#id_shop_group").val(),c=$("#id_shop").val();return""==o?alert(e):""==d?alert(n):""==u?alert(a):$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxCampaignSmsTest.php",data:{sender:o,message:d,number:u,langvalue:r,token:i,id_shop_group:l,id_shop:c},beforeSend:function(){$("#ajax-busy").show()},success:function(e){$("#ajax-busy").hide(),1==$.parseJSON(e).result?alert(t):alert(s)}}),!1}),$(".sender_order_save").live("click",function(){var e=$(this).attr("senderfield"),t=$(this).attr("messagefield"),s=$("#sender_order").val(),a=$("#sender_order_message").val();return""==s?(alert(e),document.getElementById("sender_order").focus(),!1):""==a?(alert(t),document.getElementById("sender_order_message").focus(),!1):void 0}),$(".sender_shipment_save").live("click",function(){var e=$(this).attr("senderfield"),t=$(this).attr("messagefield"),s=$("#sender_shipment").val(),a=$("#sender_shipment_message").val();return""==s?(alert(e),document.getElementById("sender_shipment").focus(),!1):""==a?(alert(t),document.getElementById("sender_shipment_message").focus(),!1):void 0}),$(".sender_campaign_save").live("click",function(){var e=$(this).attr("senderfield"),t=$(this).attr("messagefield"),s=$("#sender_campaign").val(),a=$("#sender_campaign_message").val();return""==s?(alert(e),document.getElementById("sender_campaign").focus(),!1):""==a?(alert(t),document.getElementById("sender_campaign_message").focus(),!1):void 0});